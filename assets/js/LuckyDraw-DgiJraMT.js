import{e as S,r as p,j as w,k as D,f as A,n as M,o as r,c as t,a as V,b as i,F as h,l as g,u as v,g as R,m as I,t as k,N as q,p as F,q as J}from"./vendor-TD8Qyq_t.js";import{_ as O}from"./GreedySnake-ChahVyc3.js";const $=f=>(F("data-v-0f7ebefa"),f=f(),J(),f),j={class:"page-lucky-draw"},z={class:"luckdraw-scroll mt-10"},E={class:"bg-scroll"},P={class:"lkq-name"},G={class:"turntable"},H=R('<svg class="bulb" viewBox="-6 -6 316 316" fill="currentColor" fill-rule="evenodd" data-v-0f7ebefa><g class="bulb-1" data-v-0f7ebefa><circle cx="10" cy="10" r="4" data-v-0f7ebefa></circle><circle cx="78" cy="4" r="4" data-v-0f7ebefa></circle><circle cx="152" cy="4" r="4" data-v-0f7ebefa></circle><circle cx="226" cy="4" r="4" data-v-0f7ebefa></circle><circle cx="294" cy="10" r="4" data-v-0f7ebefa></circle><circle cx="4" cy="89" r="4" data-v-0f7ebefa></circle><circle cx="4" cy="173" r="4" data-v-0f7ebefa></circle><circle cx="4" cy="258" r="4" data-v-0f7ebefa></circle><circle cx="41" cy="300" r="4" data-v-0f7ebefa></circle><circle cx="115" cy="300" r="4" data-v-0f7ebefa></circle><circle cx="189" cy="300" r="4" data-v-0f7ebefa></circle><circle cx="263" cy="300" r="4" data-v-0f7ebefa></circle><circle cx="300" cy="258" r="4" data-v-0f7ebefa></circle><circle cx="300" cy="173" r="4" data-v-0f7ebefa></circle><circle cx="300" cy="89" r="4" data-v-0f7ebefa></circle></g><g class="bulb-2" data-v-0f7ebefa><circle cx="41" cy="4" r="4" data-v-0f7ebefa></circle><circle cx="115" cy="4" r="4" data-v-0f7ebefa></circle><circle cx="189" cy="4" r="4" data-v-0f7ebefa></circle><circle cx="263" cy="4" r="4" data-v-0f7ebefa></circle><circle cx="4" cy="46" r="4" data-v-0f7ebefa></circle><circle cx="4" cy="131" r="4" data-v-0f7ebefa></circle><circle cx="4" cy="215" r="4" data-v-0f7ebefa></circle><circle cx="10" cy="294" r="4" data-v-0f7ebefa></circle><circle cx="294" cy="294" r="4" data-v-0f7ebefa></circle><circle cx="300" cy="215" r="4" data-v-0f7ebefa></circle><circle cx="300" cy="131" r="4" data-v-0f7ebefa></circle><circle cx="300" cy="46" r="4" data-v-0f7ebefa></circle><circle cx="78" cy="300" r="4" data-v-0f7ebefa></circle><circle cx="152" cy="300" r="4" data-v-0f7ebefa></circle><circle cx="226" cy="300" r="4" data-v-0f7ebefa></circle></g></svg>',1),K={class:"awards-list"},Q=$(()=>i("span",{class:"draw-btn-text"},"点击抽奖",-1)),U=[Q],W={key:1},X=S({name:"LuckyDraw"}),Y=S({...X,setup(f){let l=0,e,b=0,m=!1;const y=p(!1),s=p(0),u=w([{phone:"186****2336抽中0元话费"},{phone:"166****2336抽中1元话费"},{phone:"156****2336抽中2元话费"}]),_=w([{id:1,runId:0,name:"潘多拉音箱"},{id:2,runId:1,name:"小酷M1耳机"},{id:3,runId:2,name:"酷狗VIP会员"},{id:4,runId:7,name:"8元话费"},{id:5,runId:3,name:"12元话费"},{id:6,runId:6,name:"谢谢参与1"},{id:7,runId:5,name:"4元话费"},{id:8,runId:4,name:"谢谢参与2"}]),N=D(()=>{const c=JSON.parse(JSON.stringify(_));return c.splice(4,0,{name:"drawBtn"}),c}),T=()=>{y.value=!0,setTimeout(()=>{u.push(u[0]),u.shift(),y.value=!1},500)},x=()=>{const c=setTimeout(()=>{if(s.value++,s.value>7&&(s.value=0),e!=null&&e.id&&(Date.now()-b)/1e3>2.5){if(console.log("奖品出来了"),l+=20,(Date.now()-b)/1e3>5&&e.runId===s.value){clearTimeout(c),setTimeout(()=>{m=!1;const a=_.find(n=>n.id===e.id);a&&console.log(`您抽中的奖品是${a.name},奖品id是${a.id}`)},400);return}}else l>=50&&(l-=20);x()},l)},B=()=>{setTimeout(()=>{const c=Math.ceil(Math.random()*8),a=_.find(n=>n.id===c);a&&(e=a),console.log("返回的抽奖结果是",e)},2e3),x()},L=()=>{if(m){console.log("正在抽奖中...");return}if(isNaN(200))return!1;l=200,m=!0,b=Date.now(),B(),console.log("开始抽奖")},C=()=>history.back();return A(async()=>{await M(),setInterval(T,2e3)}),(c,a)=>{const n=q;return r(),t("div",j,[V(n,{title:"Lucky draw","left-arrow":"",onClickLeft:C}),i("div",z,[i("ul",E,[(r(!0),t(h,null,g(v(u),(d,o)=>(r(),t("li",{key:o,class:I({anim:v(y)&&o==0})},[i("span",P,k(d.phone),1)],2))),128))])]),i("div",G,[H,i("ul",K,[(r(!0),t(h,null,g(v(N),(d,o)=>(r(),t("li",{key:d.id,class:I(["awards-item",{"awards-item-draw":o===4,"run-item":d.runId===v(s)}])},[o===4?(r(),t("div",{key:0,onClick:L,class:"draw-btn"},U)):(r(),t("div",W,k(d.name),1))],2))),128))])])])}}}),ie=O(Y,[["__scopeId","data-v-0f7ebefa"]]);export{ie as default};
